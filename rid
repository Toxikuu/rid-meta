#!/bin/bash
NAME="rid"
VERS="${NAME}_version"; VERS="${!VERS}"
LINK=""
UPST="https://github.com/toxikuu/rid/tags"
DEPS="openssl tar xz bash coreutils glibc gcc"

# this meta file may need to be updated depending on the trajectory of rid's future development

IDIR=$(cat << '~fin.'

if [ -e $RIDHOME/pkgs.json ]; then
    mv -vf /tmp/pkgs.json /tmp/rid-pkgs.bak
fi

raw https://github.com/Toxikuu/rid/releases/download/v$VERS/rid.tar.xz
tar xvf "$RIDSOURCES"/rid.tar.xz -C /usr/bin
/usr/bin/rid -b

if [ -e /tmp/rid-pkgs.bak ]; then
  mv -vf /tmp/rid-pkgs.bak $RIDHOME/pkgs.json
  echo "restored pkgs.json"
fi

~fin.
)

RDIR=$(cat << '~fin.'

rm -vf /usr/bin/raw
rm -rvf /{tmp,etc}/rid

~fin.
)

# i may update udir to house the backups currently done in rdir
UDIR=$(cat << '~fin.'
~fin.
)
